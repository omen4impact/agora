["INIT] Starting initialization...\n[EVENTS] Setting up event listeners...\n[EVENTS] peer-connected registered\n[EVENTS] peer-disconnected registered\n...\n[EVENTS] All event listeners registered\n[INIT] Identity generated in Xms\n[INIT] Initialization complete\n```\n\nIf any step is missing, that's where the hang occurs.\n\n### No Peer Discovery (Critical)\n\n**Symptoms:** Created room has no way for others to join\n\n**Root Cause:** Desktop app uses libp2p native networking without:\n- Bootstrap nodes\n- Signaling server connection\n- Manual peer address entry\n\n**Mobile vs Desktop Networking:**\n\n| Feature | Mobile (Flutter) | Desktop (Tauri) |\n|---------|-----------------|-----------------|\n| Network Stack | WebRTC | libp2p native |\n| Discovery | Signaling Server | None! |\n| NAT Traversal | ICE/STUN/TURN | ICE/STUN/TURN |\n\n**Solutions (Pick One):**\n\n#### Option A: Signaling Server Integration (Recommended)\n1. Desktop connects to WebSocket signaling server\n2. Exchange peer addresses via signaling\n3. Use libp2p for actual P2P connections\n\n#### Option B: Bootstrap Nodes\n1. Deploy public Agora nodes\n2. Hardcode their addresses in the app\n3. Use Kademlia DHT for peer discovery\n\n#### Option C: Manual Address Entry\n1. Add UI to enter peer's multiaddress\n2. User shares their address via other means\n3. Manual connection via `NetworkCommand::ConnectToPeer`\n\n## Immediate Action Items\n\n### Phase 1: Debug Initialization\n- [ ] User tests with DevTools open\n- [ ] Share console logs + Rust logs\n- [ ] Identify exact hang point\n\n### Phase 2: Implement Peer Discovery\n- [ ] Choose Option A, B, or C\n- [ ] Test local connection (2 instances on same machine)\n- [ ] Test LAN connection (2 machines on same network)\n- [ ] Test WAN connection (2 machines via internet)\n\n## How to Test Locally\n\n### Test 1: Single Instance\n```bash\n# Build\ncargo build --package agora-desktop\n\n# Run with debug logging\nRUST_LOG=debug ./target/debug/agora-desktop\n```\n\n### Test 2: Two Instances (Same Machine)\n```bash\n# Terminal 1\n./target/debug/agora-desktop\n\n# Terminal 2 - Run with different config dir\nXDG_CONFIG_HOME=/tmp/agora2 ./target/debug/agora-desktop\n```\n\n## Architecture Issues to Address\n\n1. **No Signaling in Desktop:** Mobile uses WebSocket signaling, Desktop doesn't\n2. **Different Peer IDs:** Each instance generates new identity (no persistence between runs)\n3. **No Bootstrap:** Kademlia DHT has no peers to bootstrap from\n4. **Room Link Format:** `agora://room/ID` doesn't include peer address\n\n## Code Locations\n\n| Component | File |\n|-----------|------|\n| Desktop UI | `desktop/ui/index.html` |\n| Desktop Backend | `desktop/src/main.rs` |\n| Network Stack | `core/src/network.rs` |\n| Signaling Server | `node/src/signaling.rs` |\n| Mobile WebRTC | `mobile/lib/services/webrtc_service.dart` |"]